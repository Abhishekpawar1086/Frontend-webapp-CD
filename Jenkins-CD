pipeline {
  agent any

  environment {
    GCP-PROJECT-ID = 'final-project-453412'
    GAR-REPO = 'us-central1-docker.pkg.dev/final-project-453412/docker-images'
    IMAGE-NAME = 'frontend-webapp'
    IMAGE-TAG = 'latest'
    KUBE-NAMESPACE = 'frontend-app'
    // HELM_CHART_PATH = 'path/to/your/helm/chart'
  }
stages {
       stage('Clean Workspace') {
            steps {
                cleanWs() // Cleans the workspace
            }
        }
stage('Clone Repository') {
      steps {
          echo "Cloning repository..."
          git branch: 'main', credentialsId: 'Jenkins-token', url: 'https://github.com/Abhishekpawar1086/Frontend-webapp-CD.git'
        
      }
    }
 stage('Authenticate with GCP') {
      steps {
       withCredentials([file(credentialsId: 'gcp-artifact-registry-key', variable: 'gcp-key')]) {
          sh """
            gcloud auth activate-service-account --key-file=${gcp-key}
            gcloud auth configure-docker ${GAR-REPO}
          """
        }
      }
    }
  }
 }

